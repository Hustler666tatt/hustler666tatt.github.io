<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>HUSTLER TATTOO</title>

<!-- ===== PRELOAD FUENTES ===== -->
<link rel="preload" href="/fonts/evilempire.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/digitalclock.woff2" as="font" type="font/woff2" crossorigin>

<style>
/* ===== FUENTES ===== */
@font-face{
  font-family: "EvilEmpire";
  src: url("/fonts/evilempire.woff2?v=5") format("woff2"),
       url("fonts/evilempire.woff2?v=5") format("woff2");
  font-display: swap;
}
@font-face{
  font-family: "DigitalClock";
  src: url("/fonts/digitalclock.woff2?v=5") format("woff2"),
       url("fonts/digitalclock.woff2?v=5") format("woff2");
  font-display: swap;
}
/* ===== BASE ===== */
:root{ --bg:#0b0b0b; --fg:#f5f5f5; --accent:#ff4444; --muted:#b1b1b1; }
html,body{height:100%;margin:0}
body{
  background:var(--bg); color:var(--fg);
  font-family: Arial, Helvetica, sans-serif;
  text-align:center; overflow-x:hidden;
}
.container{max-width:860px;margin:0 auto;padding:64px 20px 96px;position:relative;z-index:1;}
p{margin:12px 0;line-height:1.6;font-size:1.1em;}
a{color:var(--accent);text-decoration:none;}
a:hover{text-decoration:underline;}

/* ===== FONDO ===== */
body::before{content:"";position:fixed;inset:0;pointer-events:none;z-index:0;
background:
  radial-gradient(1200px 600px at 50% -10%, #ffffff05, #0000 70%),
  radial-gradient(1200px 600px at 50% 110%, #00000070, #0000 60%),
  linear-gradient(180deg,#0b0b0b 0%,#0a0a0a 30%,#0c0c0c 60%,#0a0a0a 100%);
}
body::after{content:"";position:fixed;inset:0;pointer-events:none;z-index:0;
background:
  repeating-linear-gradient(120deg,#ffffff06 0 2px,#0000 2px 8px),
  repeating-linear-gradient(0deg,#0000 0 1px,#ffffff06 1px 2px);
mix-blend-mode:overlay;opacity:.18;
}

/* ===== TITULO GLITCH ===== */
.logo{
  font-family:"EvilEmpire", Arial, sans-serif;
  position:relative;display:inline-block;color:#ff6b9a;
  font-size:clamp(2.6rem,8vw,4rem);font-weight:900;letter-spacing:2px;
  text-transform:uppercase;margin:0 0 18px;filter:drop-shadow(0 2px 1px #000);
}
.logo::before,.logo::after{
  content:attr(data-text);position:absolute;inset:0;pointer-events:none;
  mix-blend-mode:screen;opacity:.6;
}
.logo::before{color:#00e5ff;animation:gx 2.8s steps(1,end) infinite;}
.logo::after {color:#ff0066;animation:gy 2.8s steps(1,end) infinite;}
@keyframes gx{0%,14%{transform:translateX(0)}15%,18%{transform:translateX(3px)}19%,22%{transform:translateX(-3px)}23%,100%{transform:translateX(0)}}
@keyframes gy{0%,14%{transform:translateY(0)}15%,18%{transform:translateY(-2px)}19%,22%{transform:translateY(2px)}23%,100%{transform:translateY(0)}}

/* ===== socials ===== */
.contact{margin-top:28px;}
.social{display:inline-flex;align-items:center;gap:8px;margin:10px 14px;}
.social img{width:22px;height:22px;filter:drop-shadow(0 0 2px #000a);}

/* ===== badge cry baby ===== */
.badge{
 display:none;margin:8px auto 0;width:min(92vw,680px);
 background:#1a1a1a;border:1px dashed #444;color:#f2f2f2;
 padding:10px 14px;border-radius:12px;box-shadow:0 6px 18px #0006;
}
.badge b{color:#ff6b9a}

/* ===== scratch card ===== */
.card{
  width:min(92vw,680px);margin:16px auto 10px;background:#121212;
  border:1px solid #232323;border-radius:16px;padding:18px 18px 24px;
  box-shadow:0 10px 30px #0007,inset 0 0 40px #0008;
}
.subtle{opacity:.9;color:#d6d6d6}
.muted{color:var(--muted);opacity:.85;font-size:.95em}
.scratch-wrap{position:relative;margin:14px auto 0;width:min(92vw,640px);aspect-ratio:16/7;
border-radius:14px;overflow:hidden;box-shadow:0 10px 30px #0009,inset 0 0 20px #0007;
background:linear-gradient(145deg,#101010,#0b0b0b);}
.prize{position:absolute;inset:0;display:grid;place-items:center;padding:18px;}
.prize .big{
  font-family:"DigitalClock", monospace; /* ðŸ‘ˆ fuente del premio */
  font-size:clamp(1.4rem,4vw,2.4rem);
  color:#ff6b9a;font-weight:900;letter-spacing:1px;
}

canvas#scratch{
  position:absolute;inset:0;width:100%;height:100%;
  background:
    radial-gradient(1200px 500px at 50% -20%, #ffffff10, #0000 60%),
    linear-gradient(135deg,#ffffff,#bfbfbf 40%,#e9e9e9 60%,#cfcfcf);
  cursor:crosshair;
}

.btn{background:var(--accent);color:#fff;border:0;padding:12px 20px;
border-radius:999px;font-weight:700;cursor:pointer;margin-top:14px;}
.btn.secondary{background:#2b2b2b;color:#f2f2f2;border:1px solid #3a3a3a}
.hint{margin-top:8px;color:#cfcfcf;opacity:.8;font-size:.95em}
.locked{margin-top:10px;color:#cfcfcf;opacity:.9}

/* ===== glitch confetti ===== */
.burst{position:fixed;inset:0;pointer-events:none;z-index:10;display:none;}
.burst .p{
 position:absolute;width:6px;height:24px;background:#fff;left:50%;top:40%;
 transform-origin:center 200px;opacity:.85;animation:shoot 600ms ease-out forwards;
}
@keyframes shoot{
 0%{transform:translate(-50%,-50%) rotate(var(--deg)) scaleY(1);opacity:1;}
 100%{transform:translate(calc(-50% + var(--dx)),calc(-50% + var(--dy))) rotate(var(--deg)) scaleY(.2);opacity:0;}
}
</style>
</head>

<body>
<div class="container">
<h1 class="logo" data-text="HUSTLER TATTOO">HUSTLER TATTOO</h1>

<div id="badge" class="badge"></div>

<p>ðŸŽ‰ Felicidades ðŸŽ‰</p>
<p>Por escanear este cÃ³digo te ganaste un premio. <span class="subtle">RaspÃ¡ para revelar.</span></p>
<p style="opacity:.8;font-size:.95em;margin-top:4px">
Para reclamar el premio<br><b>subÃ­ una historia y etiquetÃ¡ @_hustler_tatt</b> ðŸ“²ðŸ”¥
</p>

<div class="card">
<div id="lockMsg" class="locked" style="display:none"></div>

<div class="scratch-wrap" id="scratchWrap">
  <div class="prize" aria-live="polite">
    <div>
      <div class="muted">Tu premio es:</div>
      <h2 class="big" id="prizeText">â€”</h2>
      <div class="muted" id="prizeNote"></div>
    </div>
  </div>
  <canvas id="scratch"></canvas>
</div>

<div class="hint" id="hint">UsÃ¡ el dedo o el mouse para raspar.</div>
<button id="confirmStory" class="btn" style="display:none">Ya subÃ­ la historia âœ…</button>
<button id="resetBtn" class="btn secondary" style="display:none">Volver a intentar</button>
</div>

<p>Si querÃ©s coordinar ya mismo:</p>
<div class="contact">
  <span class="social">
    <img src="/img/ig.png"><a href="https://www.instagram.com/_hustler_tatt" target="_blank">@_hustler_tatt</a>
  </span>
  <span class="social">
    <img src="/img/wsp.png"><a href="https://wa.me/59896590303" target="_blank">096 590 303</a>
  </span>
</div>
</div>

<div id="burst" class="burst"></div>

<!-- ========================================================= -->
<!-- ======================= JAVASCRIPT ====================== -->
<!-- (Tu lÃ³gica original con premios + story + cry baby + dev) -->
<!-- ========================================================= -->
<script>
/* === MODO TEST === */
const DEV = /[?&]test=1\b/.test(location.search) || location.hash.includes('#dev');
const RESET = /[?&]reset=1\b/.test(location.search);
if(RESET){localStorage.clear();}

/* === CONFIG === */
const STORAGE="ht_scratch_v2",STORY="ht_story",CB="ht_cb";
const now=Date.now(),LOCK=DEV?0:24*60*60*1000;
const PRIZES=[
{label:"TATTOO IGNORANT GRATIS (hasta 6cm)",weight:.20,note:"Requiere historia etiquetando"},
{label:"2 Tattoos x $3000 (hasta 9cm)",weight:.25,note:"Requiere historia etiquetando"},
{label:"MATCHING TATTOO 2X1 (dos personas)",weight:.15,note:"Requiere historia etiquetando"},
{label:"Cita privada nocturna (fuera de agenda)",weight:.08,note:"Requiere historia etiquetando"},
{label:"Bebida / snack en el estudio",weight:.08,note:"Requiere historia etiquetando"},
{label:"Piedra, papel o tijera por 50% OFF (si perdÃ©s â†’ 10% OFF)",weight:.14,note:"Requiere historia etiquetando"},
{label:"Toque final / mejora de tattoo viejo gratis",weight:.10,note:"Requiere historia etiquetando"},
];
function pick(last){
 let list=PRIZES.filter(p=>p.label!==last);
 let t=list.reduce((a,c)=>a+(c.weight||1),0),r=Math.random()*t;
 for(const p of list){r-=(p.weight||1);if(r<=0)return p;}
 return list[list.length-1];
}

/* === obtener premio o bloquear === */
let last=JSON.parse(localStorage.getItem(STORAGE)||"null"),p;
let locked=last && now-last.time<LOCK;
if(locked && !DEV){p=last;}
else{
 let avoid=last?.label;
 p={...pick(avoid),time:now};
 if(!DEV) localStorage.setItem(STORAGE,JSON.stringify(p));
}

/* === mostrar premio === */
prizeText.textContent=p.label;
prizeNote.textContent=p.note;

/* === cry baby badge === */
if(localStorage.getItem(CB)==="1"){
 badge.style.display="block";
 badge.innerHTML=`ðŸ³ï¸ <b>Cry Baby badge</b>: la Ãºltima vez te fuiste sin confirmar story ðŸ˜­<br>Hoy podÃ©s jugar â€” o subÃ­ la story para reclamar.`;
 localStorage.removeItem(CB);
}

/* === bloqueo por dÃ­a === */
if(locked && !DEV){
 let hrs=Math.ceil((LOCK-(now-last.time))/(3600000));
 lockMsg.style.display="block";
 lockMsg.textContent=`Ya jugaste hoy ðŸ˜Ž VolvÃ© en ~${hrs}h`;
 scratch.style.display="none";hint.style.display="none";
}

/* === scratch logic === */
if(!locked||DEV){
let ctx=scratch.getContext("2d",{willReadFrequently:true});
let drawing=false,revealed=false,lastX=0,lastY=0;
function fit(){
 let r=scratch.getBoundingClientRect(),s=devicePixelRatio||1;
 scratch.width=r.width*s;scratch.height=r.height*s;ctx.scale(s,s);
 let g=ctx.createLinearGradient(0,0,r.width,r.height);
 g.addColorStop(0,"#cfcfcf");g.addColorStop(1,"#a9a9a9");
 ctx.fillStyle=g;ctx.fillRect(0,0,r.width,r.height);
 ctx.globalAlpha=.18;for(let i=0;i<140;i++){ctx.fillStyle="#fff";
 ctx.fillRect(Math.random()*r.width,Math.random()*r.height,Math.random()*2+.4,1);}
 ctx.globalAlpha=1;ctx.fillStyle="#1a1a1a";ctx.font="bold 20px Arial";
 ctx.textAlign="center";ctx.fillText("RASPÃ PARA REVELAR",r.width/2,r.height/2);
}
function scratchTo(x,y){
 let r=scratch.getBoundingClientRect(),cx=x-r.left,cy=y-r.top;
 ctx.globalCompositeOperation='destination-out';
 ctx.lineJoin="round";ctx.lineCap="round";ctx.lineWidth=52;
 ctx.beginPath();ctx.moveTo(lastX||cx,lastY||cy);ctx.lineTo(cx,cy);ctx.stroke();
 lastX=cx;lastY=cy;
}
function reveal(){
 if(revealed)return;revealed=true;
 burst();scratch.style.opacity=0;
 setTimeout(()=>scratch.style.display="none",500);
 confirmStory.style.display="inline-block";
 resetBtn.style.display="inline-block";
}
function burst(){
 const layer=document.getElementById("burst");layer.innerHTML="";
 for(let i=0;i<30;i++){
  const d=document.createElement("div");d.className="p";
  d.style.setProperty("--deg",Math.random()*360+"deg");
  d.style.setProperty("--dx",(Math.random()*240-120)+"px");
  d.style.setProperty("--dy",(Math.random()*240-120)+"px");
  d.style.background=i%2?"#ff6b9a":(i%3?"#7aa2f7":"#f7c843");
  layer.appendChild(d);
 }
 layer.style.display="block";setTimeout(()=>layer.style.display="none",650);
}
scratch.addEventListener("mousedown",e=>{drawing=true;scratchTo(e.clientX,e.clientY)});
scratch.addEventListener("mousemove",e=>drawing&&scratchTo(e.clientX,e.clientY));
window.addEventListener("mouseup",()=>drawing=false);
scratch.addEventListener("touchstart",e=>{drawing=true;scratchTo(e.touches[0].clientX,e.touches[0].clientY);e.preventDefault();});
scratch.addEventListener("touchmove",e=>{if(drawing)scratchTo(e.touches[0].clientX,e.touches[0].clientY);e.preventDefault();});
scratch.addEventListener("touchend",()=>drawing=false);
function check(){
 let r=scratch.getBoundingClientRect();
 let d=ctx.getImageData(0,0,r.width,r.height).data,t=0;
 for(let i=3;i<d.length;i+=4){if(d[i]===0)t++;}
 if(t/(d.length/4)>.48)reveal();
}
setInterval(check,300);
window.addEventListener("resize",fit);fit();
}

/* === confirmar story === */
confirmStory.onclick=()=>{
 localStorage.setItem(STORY,"1");
 confirmStory.textContent="Â¡Gracias por etiquetar! ðŸ”¥";
 confirmStory.disabled=true;
}

/* === cry baby detection === */
window.addEventListener("beforeunload",()=>{
 if(!localStorage.getItem(STORY)&&scratch.style.display==="none"){
  localStorage.setItem(CB,"1");
 }
});
</script>
</body>
</html>
